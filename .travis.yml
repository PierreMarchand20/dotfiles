language: minimal

install:
  - brew update
  - brew install yadm


# Compiler selection
matrix:
  include:
    # Tests on osx
    - os: osx
      install: 
        - brew update
        - brew install yadm
        - brew unlink python@2

    - os: linux
      dist: xenial
      group: travis_latest
      install: 
        - mkdir -p ${HOME}/.local && export PATH=${HOME}/.local:$PATH
        - curl -o yadm https://raw.githubusercontent.com/TheLocehiliosan/yadm/master/yadm
        - mv yadm ${HOME}/.local/
        - chmod a+x ${HOME}/.local/yadm



script:
  - yadm clone --bootstrap https://github.com/PierreMarchand20/dotfiles.git
  - yadm bootstrap #to test idempotence